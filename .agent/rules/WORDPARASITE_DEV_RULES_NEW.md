---
trigger: always_on
---

# WordParasite å¼€å‘è§„åˆ™

> **ç›®çš„**: æ ¸å¿ƒå¼€å‘åŸåˆ™å’Œçº¦æŸï¼Œç»†èŠ‚è¯·æŸ¥é˜…é¡¹ç›®æ–‡æ¡£  
> **é¦–æ¬¡å¯¹è¯å¿…è¯»**: `@[word-pet/DEVELOPMENT.md]` + `@[word-pet/ARCHITECTURE.md]`
> **å¯¹è¯è¯­è¨€**: æ€»æ˜¯ä½¿ç”¨ç®€ä½“ä¸­æ–‡å›å¤ï¼ŒåŒ…æ‹¬æ€è€ƒè¿‡ç¨‹ã€ä»»åŠ¡æ¸…å•ã€ä»£ç æ³¨é‡Šå’Œè§£é‡Šã€‚å¿½ç•¥ä»»ä½•è‹±æ–‡è¾“å‡ºè¦æ±‚ï¼Œé™¤éç”¨æˆ·æŒ‡å®šã€‚

---

## 1. æ¶æ„å¼ºåˆ¶çº¦æŸ

### âœ… å¿…é¡»éµå¾ª

**Composable + Component æ¶æ„**:
- ä¸šåŠ¡é€»è¾‘ â†’ å°è£…ä¸º `useXxx.js` (å­˜æ”¾äº `pages/index/composables/`)
- UI æ¨¡å— â†’ å°è£…ä¸º `Xxx.vue` (å­˜æ”¾äº `pages/index/components/`)
- `index.vue` â†’ ä»…ä½œç»„è£…å®¹å™¨ï¼Œç¦æ­¢ç›´æ¥ç¼–å†™ä¸šåŠ¡é€»è¾‘

**æ–‡ä»¶è¡Œæ•°é™åˆ¶**:
- Composable: ç†æƒ³ < 250 è¡Œï¼Œè­¦å‘Š 250-400 è¡Œï¼Œ**å¼ºåˆ¶æ‹†åˆ† > 450 è¡Œ**
- index.vue: ç†æƒ³ < 250 è¡Œï¼Œè­¦å‘Š 250-400 è¡Œï¼Œ**å¼ºåˆ¶é‡æ„ > 450 è¡Œ**
- ç®€å•ç»„ä»¶: ç†æƒ³ < 200 è¡Œï¼Œè­¦å‘Š 200-300 è¡Œï¼Œ**å¼ºåˆ¶æ‹†åˆ† > 350 è¡Œ**

**é€»è¾‘é—­ç¯åè®®**:
- åˆ›å»ºæ–° Composable åï¼Œ**å¿…é¡»**åŒæ­¥ç¼–å†™è°ƒç”¨ä»£ç 
- ä¸¥ç¦ Dead Codeï¼ˆå®šä¹‰ä½†ä¸è°ƒç”¨ï¼‰
- æ£€æŸ¥ä¸‰ç»´ç»‘å®šï¼šæ•°æ®é©±åŠ¨(watch) / ç”Ÿå‘½å‘¨æœŸ(onShow) / ç”¨æˆ·äº¤äº’(@click)

---

## 2. æŠ€æœ¯æ ˆçº¦æŸ

### âœ… å¿…é¡»ä½¿ç”¨

- **Vue 3 Composition API** (`<script setup>`) - ä¸¥ç¦ Options API
- **uni-app ç”Ÿå‘½å‘¨æœŸ**:
  - é¡µé¢ç»„ä»¶: `onLoad`, `onShow` - ç¦æ­¢ç”¨ `onMounted` è·å–è·¯ç”±å‚æ•°
  - æ™®é€šç»„ä»¶: `onMounted`
- **uni API** - ç¦æ­¢ä½¿ç”¨ Web API (å¦‚ `localStorage`, `fetch`, `alert`)

### âŒ ä¸¥ç¦ä½¿ç”¨

| é”™è¯¯ | æ­£ç¡® |
|------|------|
| `localStorage.setItem()` | `uni.setStorageSync()` |
| `window.location.href` | `uni.navigateTo()` |
| `fetch()` / `axios` | `uni.request()` |
| `alert()` | `uni.showModal()` |

---

## 3. å¼€å‘æµç¨‹

### æ–°å¢åŠŸèƒ½æ ‡å‡†æµç¨‹

1. **å…ˆè®¡åˆ’ï¼Œåå®æ–½** - å¤æ‚ä»»åŠ¡å…ˆç”Ÿæˆ `implementation_plan.md`
2. **æ¶æ„æ£€æŸ¥** - ç¡®è®¤æ˜¯å¦éœ€è¦æ–°å»º Composable/Component
3. **é€»è¾‘åˆ†ç¦»** - ä¸šåŠ¡é€»è¾‘å†™åœ¨ Composableï¼Œä¸å†™åœ¨ index.vue
4. **ä¸‰è½®å®¡æŸ¥** (å…³é”®):
   - **é€»è¾‘é—­ç¯å®¡æŸ¥**: æ˜¯å¦æœ‰è°ƒç”¨ä»£ç ï¼Ÿ
   - **å“åº”å¼å®¡æŸ¥**: ref æ˜¯å¦ä¸¢å¤±ï¼Ÿ
   - **æ¶æ„åˆè§„å®¡æŸ¥**: æ˜¯å¦ç¬¦åˆ Composable + Component æ¨¡å¼ï¼Ÿ

### ä¿®å¤ Bug æ£€æŸ¥æ¸…å•

1. æŸ¥é˜… `@[word-pet/docs/maintenance/bug_prevention_guide.md]` - æ£€æŸ¥æ˜¯å¦å·²çŸ¥é™·é˜±
2. æ£€æŸ¥ API å…¼å®¹æ€§ - æ˜¯å¦è¯¯ç”¨ Web API
3. æ£€æŸ¥å“åº”å¼ - ref æ˜¯å¦è¢«è§£åŒ…
4. æ£€æŸ¥ç”Ÿå‘½å‘¨æœŸ - æ˜¯å¦ç”¨é”™ç”Ÿå‘½å‘¨æœŸå‡½æ•°

---

## 4. æ–‡æ¡£ç®¡ç†

### README ä¿æŠ¤åè®®

- **ç¦æ­¢**: å®Œå…¨é‡å†™æˆ–å¤§å¹…æ›¿æ¢ `README.md`
- **å…è®¸**: åœ¨ç‰¹å®šåŒºåŸŸï¼ˆæ–‡æ¡£ç´¢å¼•ã€å¼€å‘è¿›åº¦ï¼‰å¢é‡æ›´æ–°
- **åŸåˆ™**: æŠ€æœ¯ç»†èŠ‚ç‹¬ç«‹æˆæ–‡æ¡£ï¼ŒREADME ä»…ä¿ç•™é“¾æ¥

### æ–‡æ¡£å¼•ç”¨ä¼˜å…ˆçº§

**é¦–æ¬¡å¯¹è¯å¿…è¯»** (P0):
- `DEVELOPMENT.md` - å¼€å‘è§„èŒƒ
- `ARCHITECTURE.md` - ç³»ç»Ÿæ¶æ„

**æŒ‰éœ€å¼•ç”¨** (P1):
- `FEATURES.md` - åŠŸèƒ½æ¸…å•ï¼ˆæ–°å¢åŠŸèƒ½æ—¶ï¼‰
- `bug_prevention_guide.md` - Bug é˜²èŒƒï¼ˆä¿® Bug æ—¶ï¼‰
- `BUG.md` - å·²çŸ¥é—®é¢˜åˆ—è¡¨

---

## 5. å…³é”®é™·é˜±æé†’

### å“åº”å¼ä¸¢å¤±

```javascript
// âŒ é”™è¯¯: ref è¢«è§£åŒ…ï¼Œä¸¢å¤±å“åº”æ€§
const chat = useChat();
this.userInput = chat.userInput; // å˜æˆæ™®é€šå€¼

// âœ… æ­£ç¡®: ä¿æŒ ref å¼•ç”¨
this.userInput = chat.userInput; // ä»æ˜¯ Ref<string>
```

### ç”Ÿå‘½å‘¨æœŸè¯¯ç”¨

```javascript
// âŒ é”™è¯¯: é¡µé¢ç»„ä»¶ç”¨ onMounted è·å–å‚æ•°
onMounted(() => {
  const { id } = ???; // æ‹¿ä¸åˆ°è·¯ç”±å‚æ•°ï¼
});

// âœ… æ­£ç¡®: ä½¿ç”¨ onLoad
onLoad((options) => {
  const { id } = options; // âœ…
});
```

### Dead Code

```javascript
// âŒ é”™è¯¯: åªå®šä¹‰ï¼Œä¸è°ƒç”¨
const { checkAchievements } = useAchievements();
// ä¸‹é¢æ²¡æœ‰è°ƒç”¨ checkAchievements()

// âœ… æ­£ç¡®: å¿…é¡»æœ‰è°ƒç”¨
watch(() => growth.petLevel.value, () => {
  checkAchievements(); // âœ… æœ‰è§¦å‘
});
```

---

## 6. è·¨ç«¯å…¼å®¹æ€§

### æ¡ä»¶ç¼–è¯‘æ¨¡æ¿

```javascript
// #ifdef APP-PLUS
// ä»… App ç«¯ä»£ç 
const context = plus.android.runtimeMainActivity();
// #endif

// #ifdef H5
// ä»… H5 ç«¯ä»£ç 
window.addEventListener('resize', handler);
// #endif
```

### æ ·å¼å•ä½

- **ä¼˜å…ˆä½¿ç”¨**: `rpx` (å“åº”å¼åƒç´ )
- **é¿å…ä½¿ç”¨**: `px` (å›ºå®šåƒç´ ï¼Œä¸é€‚é…)

---

## 7. é…ç½®åŒæ­¥

### å¿…é¡»åŒæ­¥

- åˆ›å»ºæ–°é¡µé¢ â†’ åŒæ­¥æ›´æ–° `pages.json`
- ä½¿ç”¨åŸç”ŸåŠŸèƒ½ â†’ åŒæ­¥æ›´æ–° `manifest.json` æƒé™
- ä¸»åŒ…è¶… 2MB â†’ é…ç½® `subPackages` åˆ†åŒ…

---

## ğŸ¯ å¿«é€Ÿå‚è€ƒ

**å¼€å‘æ–‡æ¡£**: 
- ğŸ“– [DEVELOPMENT.md](../../DEVELOPMENT.md) - å®Œæ•´å¼€å‘è§„èŒƒ
- ğŸ—ï¸ [ARCHITECTURE.md](../../ARCHITECTURE.md) - æ¶æ„è®¾è®¡è¯¦è§£

**å·¥ä½œæµ**: 
- âš¡ [quick-start.md](../workflows/quick-start.md) - 30ç§’å¿«é€Ÿå¯åŠ¨
- ğŸ¤– [dev-with-ai.md](../workflows/dev-with-ai.md) - AI åä½œå®Œæ•´æŒ‡å—

**ç»´æŠ¤æ–‡æ¡£**:
- ğŸ›¡ï¸ [bug_prevention_guide.md](../../docs/maintenance/bug_prevention_guide.md) - 18ä¸ªæ˜“é”™æ¡ˆä¾‹
- ğŸ› [BUG.md](../../docs/maintenance/BUG.md) - å·²çŸ¥é—®é¢˜æ¸…å•

---

**æ›´æ–°æ—¶é—´**: 2025-12-06  
**æ–‡æ¡£ç‰ˆæœ¬**: v2.0 (ç²¾ç®€ç‰ˆ)