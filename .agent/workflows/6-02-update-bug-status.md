---
description: 更新 BUG.md 状态
---

# BUG 状态更新工作流

## 使用场景
Bug 已修复但 BUG.md 没有同步更新状态

---

## 📚 文档职责分工

### BUG.md - Bug 追踪
**职责**: 追踪所有未完成的 Bug（未修复 + 修复中 + 已修复待测试）

### TESTING_CHECKLIST.md - 功能测试清单
**职责**: 只记录**新功能**的测试项（不包含 Bug）

### UPDATES.md - 更新日志
**职责**: 记录已完成的功能和**已修复的 Bug**

### 流程图

```
Bug 发现 → BUG.md (未修复)
    ↓
修复代码 → BUG.md (修复中)
    ↓
修复完成 → BUG.md (已修复待测试)
    ↓
测试通过 → 从 BUG.md 删除 + 添加到 UPDATES.md ✅
```

**⭐ 关键**: Bug 全程在 BUG.md，不经过 TESTING_CHECKLIST.md

---

## 📋 更新流程

### Step 1: 确定 Bug 当前状态

**状态流转**:
```
未修复 → 修复中 → 已修复待测试 → 完全修复（移除）
```

**判断标准**:

| 状态 | 标记 | 说明 |
|------|------|------|
| **未修复** | ❌ | 刚发现的问题 |
| **修复中** | 🔧 | 正在修复代码 |
| **已修复待测试** | ✅ 已修复，待测试 | 代码已改，需真机验证 |
| **完全修复** | - | 测试通过，从 BUG.md 移除 |

---

### Step 2: 更新 Bug 状态

#### 场景 A: 标记为"修复中"

**修改内容**:
```markdown
### #101 【悬浮窗】点击宠物没有AI响应气泡
**发现时间**: 2025-12-06  
**状态**: 🔧 修复中  ← 修改这里
**测试设备**: Android真机
```

**同时更新快速概览表格**:
```markdown
| 优先级 | 未修复 | 修复中 | 已修复待测试 |
|--------|--------|--------|--------------|
| 🔴 高 | 0 | 1 | 4 |  ← 调整数字
```

---

#### 场景 B: 标记为"已修复待测试"

**修改内容**:
```markdown
### #101 【悬浮窗】点击宠物没有AI响应气泡
**发现时间**: 2025-12-06  
**状态**: ✅ 已修复，待测试  ← 修改这里
**测试设备**: Android真机
```

**添加修复信息**:
```markdown
**修复时间**: 2025-12-06
**修复方案**: 在 index.vue 中集成 usePetInteraction
**相关提交**: commit-hash
```

---

#### 场景 C: 完全修复（测试通过）

**触发条件**:
- ✅ 代码已修复
- ✅ 真机测试通过
- ✅ 无副作用
- ✅ 功能正常

**步骤**:

1. **从 BUG.md 删除该条目**

2. **更新快速概览表格** - 减少对应计数

3. **添加到 UPDATES.md**:
```markdown
## 🎉 2025-12-06 - 悬浮窗交互系统完成

### 🐛 Bug 修复

修复了 5 个悬浮窗相关问题：
- #101 点击宠物 AI 响应气泡不显示 ✅
- #102 长按出现系统菜单 ✅
- #103 边缘吸附无效 ✅
- #104 空白尺寸不合理 ✅
- #105 气泡被截断 ✅

详细修复方案请查阅历史版本 BUG.md
```

**⚠️ 注意**: 
- ❌ **不要**移到 TESTING_CHECKLIST.md（那是功能测试清单）
- ✅ Bug 全程在 BUG.md 管理，测试通过后直接到 UPDATES.md

---

### Step 3: 更新快速概览

**位置**: BUG.md 顶部

**更新规则**:

```markdown
## 📊 快速概览

| 优先级 | 未修复 | 修复中 | 已修复待测试 |
|--------|--------|--------|--------------|
| 🔴 高 | X | Y | Z |
| 🟡 中 | A | B | C |
| 🟢 低 | D | E | F |

**总计**: N 个活跃问题
```

**计算方法**:
- 统计每个优先级下各状态的 Bug 数量
- 总计 = 所有状态的 Bug 总和
- 不包括已完全修复（已移除）的 Bug

---

## 🔄 批量更新

### 场景: 多个 Bug 同时修复

**使用脚本辅助**:

```powershell
# 列出所有"修复中"的 Bug
rg "🔧 修复中" docs/maintenance/BUG.md
```

**批量更新清单**:
- [ ] Bug #101 - 已测试通过 → 移除
- [ ] Bug #102 - 已测试通过 → 移除
- [ ] Bug #103 - 仍在测试 → 保持"待测试"

---

## 📝 更新模板

### 模板 1: 未修复 → 修复中

```diff
- **状态**: 未修复
+ **状态**: 🔧 修复中
+ **开始修复**: 2025-12-06
```

### 模板 2: 修复中 → 已修复待测试

```diff
- **状态**: 🔧 修复中
+ **状态**: ✅ 已修复，待测试

+ **修复时间**: 2025-12-06
+ **修复方案**: [简要说明]
+ **相关文件**: 
+ - [文件路径]
```

### 模板 3: 已修复待测试 → 完全修复

**从 BUG.md 删除**，**添加到 UPDATES.md**:

```markdown
### 🐛 Bug 修复

修复了 X 个问题：
- #101 问题描述
- #102 问题描述

详细记录请查阅 [BUG.md](./BUG.md)
```

---

## ⚠️ 注意事项

### 1. 保持一致性

**确保同步更新**:
- [ ] Bug 条目状态
- [ ] 快速概览表格
- [ ] 总计数字

### 2. 完全修复的标准

**必须满足**:
- ✅ 代码已修复
- ✅ 真机测试通过
- ✅ 无副作用
- ✅ 用户验证通过（如适用）

**不要过早移除**:
- ❌ 代码改了但没测试
- ❌ 模拟器测试通过但真机没测
- ❌ 修复了但出现新问题

### 3. 数据一致性

**删除 Bug 前**:
1. 确认该 Bug 在 UPDATES.md 中有记录
2. 确认修复方案已文档化
3. 确认不会影响其他 Bug 的引用

---

## 🔍 快速检查命令

### 检查未同步的 Bug

**查找"已修复"但仍在文件中的**:
```powershell
# 统计各状态 Bug 数量
rg "状态.*未修复" docs/maintenance/BUG.md | Measure-Object -Line
rg "状态.*修复中" docs/maintenance/BUG.md | Measure-Object -Line
rg "状态.*已修复" docs/maintenance/BUG.md | Measure-Object -Line
```

**验证表格数字**:
```powershell
# 手动统计并对比快速概览表格
```

---

## 📖 完整示例

### 示例: Bug #101 从发现到完全修复

**1. 初始状态** (刚发现):
```markdown
### #101 【悬浮窗】点击宠物没有AI响应气泡
**发现时间**: 2025-12-06  
**状态**: 未修复  
```

**2. 开始修复**:
```markdown
**状态**: 🔧 修复中
**开始修复**: 2025-12-06 14:30
```

**3. 代码修复完成**:
```markdown
**状态**: ✅ 已修复，待测试
**修复时间**: 2025-12-06 15:20
**修复方案**: 在 index.vue 中集成 usePetInteraction
**相关文件**:
- pages/index/index.vue
- pages/index/composables/usePetInteraction.js
```

**4. 测试通过，完全修复**:
- 从 BUG.md 删除该条目
- 添加到 UPDATES.md
- 更新快速概览表格（-1）

---

## ⚡ 快速命令

**查看 BUG.md**:
```
/view @[word-pet/docs/maintenance/BUG.md]
```

**更新 Bug 状态**:
```
/6-02-update-bug-status

我修复了 Bug #101，请更新状态为"已修复待测试"
```

**批量检查**:
```
请帮我检查 BUG.md 中所有"已修复待测试"的 Bug，
哪些可以移除了？
```

---

## 📋 更新检查清单

执行更新后验证：

- [ ] Bug 条目状态已更新
- [ ] 快速概览表格数字正确
- [ ] 总计数字正确
- [ ] 如果完全修复，已添加到 UPDATES.md
- [ ] 相关文件引用正确

---

## 📖 参考文档

- [BUG.md](../../docs/maintenance/BUG.md) - Bug 追踪文档
- [UPDATES.md](../../docs/maintenance/UPDATES.md) - 更新日志
- [/6-01-report-bug](./6-01-report-bug.md) - 报告新 Bug

---

**创建时间**: 2025-12-07  
**适用场景**: Bug 修复后的状态同步
