---
description: æ€§èƒ½ä¼˜åŒ–å·¥ä½œæµ
---

# æ€§èƒ½ä¼˜åŒ–å·¥ä½œæµ

## ä½¿ç”¨åœºæ™¯
åº”ç”¨å“åº”æ…¢ã€å¡é¡¿ã€å†…å­˜å ç”¨é«˜ç­‰æ€§èƒ½é—®é¢˜

---

## ğŸ“Š æ€§èƒ½é—®é¢˜è¯Šæ–­

### Step 0: è®°å½•åŸºå‡†æ•°æ®ï¼ˆå¿…é¡»ï¼‰â­

**ä¸ºä»€ä¹ˆé‡è¦**: æ²¡æœ‰åŸºå‡†æ•°æ®ï¼Œæ— æ³•é‡åŒ–ä¼˜åŒ–æ•ˆæœ

**åŸºå‡†æ•°æ®æ¨¡æ¿**:
```markdown
# æ€§èƒ½åŸºå‡†æµ‹è¯• - 2025-12-07

## æµ‹è¯•ç¯å¢ƒ
- è®¾å¤‡: Redmi Note 11T Pro
- ç³»ç»Ÿ: Android 12
- ç‰ˆæœ¬: v1.2.0

## åŸºå‡†æŒ‡æ ‡

| æŒ‡æ ‡ | å½“å‰å€¼ | ç›®æ ‡å€¼ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|--------|------|
| å†·å¯åŠ¨æ—¶é—´ | 5.2s | < 3s | - | - |
| çƒ­å¯åŠ¨æ—¶é—´ | 1.8s | < 1s | - | - |
| Tab åˆ‡æ¢ | 800ms | < 300ms | - | - |
| åˆ—è¡¨æ»šåŠ¨ FPS | 45 | 60 | - | - |
| å†…å­˜å ç”¨ï¼ˆå¯åŠ¨ï¼‰ | 85MB | < 60MB | - | - |
| å†…å­˜å ç”¨ï¼ˆä½¿ç”¨1å°æ—¶ï¼‰ | 120MB | < 80MB | - | - |

## æµ‹è¯•æ­¥éª¤
1. æ¸…é™¤åº”ç”¨æ•°æ®
2. å†·å¯åŠ¨åº”ç”¨ï¼Œè®°å½•æ—¶é—´
3. ä½¿ç”¨åº”ç”¨ 10 åˆ†é’Ÿ
4. åˆ‡æ¢å„ä¸ª Tabï¼Œè®°å½•å“åº”æ—¶é—´
5. æ»šåŠ¨åˆ—è¡¨ï¼Œä½¿ç”¨ Android Profiler è®°å½• FPS
6. è®°å½•å†…å­˜å ç”¨

æµ‹è¯•å®Œæˆæ—¶é—´: 2025-12-07 14:30
```

**ä¿å­˜ä½ç½®**: `docs/performance/baseline-YYYY-MM-DD.md`

**æµ‹è¯•å·¥å…·**:
- HBuilderX æ€§èƒ½åˆ†æå™¨
- Chrome DevTools (H5)
- Android Profiler (App)

---

### Step 1: è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ

**HBuilderX æ€§èƒ½åˆ†æ**:
```
è¿è¡Œ â†’ è¿è¡Œé…ç½® â†’ è°ƒè¯•æ¨¡å¼
æŸ¥çœ‹ Console æ€§èƒ½æ•°æ®
```

**è®¡æ—¶æµ‹é‡**:
```javascript
console.time('åŠŸèƒ½åç§°');
// å¾…æµ‹è¯•ä»£ç 
console.timeEnd('åŠŸèƒ½åç§°');
```

**å†…å­˜ç›‘æ§**:
```javascript
// uni-app å†…å­˜ä½¿ç”¨
const performance = uni.getPerformance();
console.log('å†…å­˜ä½¿ç”¨:', performance.memory);
```

---

### Step 2: å¸¸è§æ€§èƒ½ç“¶é¢ˆ

#### ç“¶é¢ˆ 1: è¿‡åº¦æ¸²æŸ“

**è¡¨ç°**: é¡µé¢åˆ‡æ¢å¡é¡¿ã€æ»šåŠ¨ä¸æµç•…

**è¯Šæ–­**:
```javascript
// æ£€æŸ¥ watch ç›‘å¬æ•°é‡
// æ£€æŸ¥è®¡ç®—å±æ€§å¤æ‚åº¦
// æ£€æŸ¥åˆ—è¡¨æ¸²æŸ“æ•°é‡
```

**ä¼˜åŒ–**:
- ä½¿ç”¨ `v-show` æ›¿ä»£ `v-if`ï¼ˆé¢‘ç¹åˆ‡æ¢ï¼‰
- å¤§åˆ—è¡¨ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
- å‡å°‘ watch ç›‘å¬

---

#### ç“¶é¢ˆ 2: Composable è¿‡åº¦è°ƒç”¨

**è¡¨ç°**: æ•°æ®åŠ è½½æ…¢

**è¯Šæ–­**:
```javascript
// æ£€æŸ¥ Composable è°ƒç”¨æ¬¡æ•°
let callCount = 0;
export function useXxx() {
  callCount++;
  console.log('useXxx è°ƒç”¨æ¬¡æ•°:', callCount);
}
```

**ä¼˜åŒ–**:
- ä½¿ç”¨å•ä¾‹æ¨¡å¼
- ç¼“å­˜è®¡ç®—ç»“æœ
- å»¶è¿Ÿåˆå§‹åŒ–

---

#### ç“¶é¢ˆ 3: å›¾ç‰‡/èµ„æºæœªä¼˜åŒ–

**è¡¨ç°**: åŠ è½½æ—¶é—´é•¿

**è¯Šæ–­**:
- æ£€æŸ¥å›¾ç‰‡å¤§å°ï¼ˆåº” < 100KBï¼‰
- æ£€æŸ¥æ˜¯å¦ä½¿ç”¨å‹ç¼©

**ä¼˜åŒ–**:
- å›¾ç‰‡å‹ç¼©ï¼ˆTinyPNGï¼‰
- ä½¿ç”¨ WebP æ ¼å¼
- æ‡’åŠ è½½å›¾ç‰‡

---

#### ç“¶é¢ˆ 4: å†…å­˜æ³„æ¼

**è¡¨ç°**: é•¿æ—¶é—´ä½¿ç”¨åå¡é¡¿

**è¯Šæ–­**:
```javascript
// æ£€æŸ¥æ˜¯å¦æ¸…ç†ç›‘å¬å™¨
onUnmounted(() => {
  // å¿…é¡»æ¸…ç†
});
```

**ä¼˜åŒ–**:
- watch è¿”å›æ¸…ç†å‡½æ•°
- åŠæ—¶ç§»é™¤äº‹ä»¶ç›‘å¬
- é‡Šæ”¾å¤§å¯¹è±¡å¼•ç”¨

---

## ğŸ”§ ä¼˜åŒ–ç­–ç•¥

### ç­–ç•¥ 1: é˜²æŠ–/èŠ‚æµ

**åœºæ™¯**: é¢‘ç¹è§¦å‘çš„äº‹ä»¶

```javascript
// é˜²æŠ–ï¼ˆè¾“å…¥æ¡†ï¼‰
import { debounce } from '@/utils/common.js';

const handleInput = debounce((val) => {
  // å¤„ç†è¾“å…¥
}, 300);

// èŠ‚æµï¼ˆæ»šåŠ¨ï¼‰
import { throttle } from '@/utils/common.js';

const handleScroll = throttle(() => {
  // å¤„ç†æ»šåŠ¨
}, 100);
```

---

### ç­–ç•¥ 2: è™šæ‹Ÿåˆ—è¡¨

**åœºæ™¯**: å¤§é‡æ•°æ®åˆ—è¡¨

```vue
<template>
  <recycle-list 
    :list="longList"
    :item-height="50"
  >
    <template v-slot="{ item }">
      <view class="item">{{ item.name }}</view>
    </template>
  </recycle-list>
</template>
```

---

### ç­–ç•¥ 3: æ‡’åŠ è½½

**å›¾ç‰‡æ‡’åŠ è½½**:
```vue
<image 
  :src="item.thumb" 
  lazy-load
  mode="aspectFill"
/>
```

**ç»„ä»¶æ‡’åŠ è½½**:
```javascript
// å¼‚æ­¥ç»„ä»¶
const HeavyComponent = defineAsyncComponent(() =>
  import('./HeavyComponent.vue')
);
```

---

### ç­–ç•¥ 4: åˆ†åŒ…åŠ è½½

**manifest.json**:
```json
{
  "subPackages": [
    {
      "root": "pages/shop",
      "pages": [...]
    }
  ],
  "preloadRule": {
    "pages/index/index": {
      "network": "all",
      "packages": ["pages/shop"]
    }
  }
}
```

---

## ğŸ¯ uni-app ç‰¹å®šä¼˜åŒ–

### ä¼˜åŒ– 1: é¡µé¢é¢„åŠ è½½

```json
// pages.json
{
  "preloadRule": {
    "pages/index/index": {
      "network": "all",
      "packages": ["__APP__"]
    }
  }
}
```

### ä¼˜åŒ– 2: æ¡ä»¶ç¼–è¯‘

```javascript
// #ifdef APP-PLUS
// ä»… App ç«¯æ‰§è¡Œçš„ä»£ç 
// #endif

// #ifdef H5
// ä»… H5 ç«¯æ‰§è¡Œçš„ä»£ç 
// #endif
```

### ä¼˜åŒ– 3: å‡å°‘ setData è°ƒç”¨

**ä¸å¥½çš„åšæ³•**:
```javascript
this.name = 'Alice';
this.age = 18;
this.city = 'Beijing';
```

**å¥½çš„åšæ³•**:
```javascript
Object.assign(this, {
  name: 'Alice',
  age: 18,
  city: 'Beijing'
});
```

---

## âœ… æ€§èƒ½æµ‹è¯•éªŒè¯

### æµ‹è¯•æ¸…å•

**å¯åŠ¨æ—¶é—´**:
- [ ] å†·å¯åŠ¨ < 3ç§’
- [ ] çƒ­å¯åŠ¨ < 1ç§’

**é¡µé¢åˆ‡æ¢**:
- [ ] Tab åˆ‡æ¢ < 300ms
- [ ] é¡µé¢è·³è½¬ < 500ms

**åˆ—è¡¨æ»šåŠ¨**:
- [ ] 60 FPS æµç•…æ»šåŠ¨
- [ ] æ— æ˜æ˜¾å¡é¡¿

**å†…å­˜å ç”¨**:
- [ ] é¦–é¡µ < 50MB
- [ ] é•¿æ—¶é—´ä½¿ç”¨å¢é•¿ < 20MB

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”æŠ¥å‘Š

**ä¼˜åŒ–å‰**:
```
å¯åŠ¨æ—¶é—´: 5.2s
Tab åˆ‡æ¢: 800ms
å†…å­˜å ç”¨: 120MB
```

**ä¼˜åŒ–å**:
```
å¯åŠ¨æ—¶é—´: 2.1s â¬‡ï¸ 60%  
Tab åˆ‡æ¢: 200ms â¬‡ï¸ 75%
å†…å­˜å ç”¨: 45MB â¬‡ï¸ 62%
```

---

## ğŸ“– å‚è€ƒæ–‡æ¡£

- [uni-app æ€§èƒ½ä¼˜åŒ–](https://uniapp.dcloud.net.cn/tutorial/performance.html)
- [bug_prevention_guide.md](../../docs/maintenance/bug_prevention_guide.md)

---

**åˆ›å»ºæ—¶é—´**: 2025-12-06
